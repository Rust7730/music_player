<div class="music-player-container">

  <div class="player-section">
    <div class="player-content">
      <div class="album-artwork">
        <img [src]="getAlbumImage()" [alt]="currentTrack?.name || 'Album artwork'" />
      </div>

      <div class="player-controls">
        <button
          class="control-btn"
          (click)="playPrevious()"
          [disabled]="currentTrackIndex <= 0"
          title="Anterior">
          <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M6 6h2v12H6zm3.5 6l8.5-6v12z"/></svg>
        </button>

        <button
          class="control-btn play-btn"
          (click)="togglePlayPause()"
          [class.playing]="isPlaying"
          [disabled]="!currentTrack || !currentTrack.preview_url"
          title="Reproducir/Pausar">
          <svg *ngIf="!isPlaying" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          <svg *ngIf="isPlaying" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
        </button>

        <button
          class="control-btn"
          (click)="playNext()"
          [disabled]="currentTrackIndex < 0 || currentTrackIndex >= searchResults.length - 1"
          title="Siguiente">
          <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M16 18h2V6h-2zm-3.5-6l-8.5-6v12z"/></svg>
        </button>
      </div>

      <div class="progress-bar-container" *ngIf="currentTrack && currentTrack.preview_url">
          <span class="time-label">{{ currentTime | timeFormat }}</span>
          <div class="progress-bar">
            <div class="progress-bar-fill" [style.width.%]="progressPercentage"></div>
          </div>
          <span class="time-label">{{ duration | timeFormat }}</span>
      </div>
      <div class="track-info" *ngIf="currentTrack">
        <h1 class="track-title">{{ currentTrack.name }}</h1>
        <p class="track-artist">{{ getArtistsNames({ artists: currentTrack.artists }) }}</p>
      </div>

      <div *ngIf="currentTrack && !currentTrack.preview_url" class="no-preview-message">
          <p>Esta canci칩n no tiene previsualizaci칩n disponible.</p>
      </div>
      </div>
    </div> <div class="search-panel">
    <div class="search-header">
      <h2>Playlist Inicial</h2>

      <div class="search-bar">
        <svg class="search-icon" viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        <input
          type="text"
          [(ngModel)]="searchQuery"
          (keypress)="onSearchKeyPress($event)"
          placeholder="Artista, canci칩n o 치lbum..."
          class="search-input" />
        <button
          class="search-btn"
          (click)="searchTracks()"
          [disabled]="!searchQuery.trim()">
          Buscar
        </button>
      </div>
    </div>

    <div class="results-list">
       <div class="loading" *ngIf="isSearching && searchResults.length === 0">
          <div class="spinner"></div>
          <p>Cargando playlist inicial...</p>
        </div>
         <div class="no-results" *ngIf="noResults && !isSearching">
            <p>No se pudo cargar la playlist inicial.</p>
         </div>

      <div
        class="result-item"
        *ngFor="let track of searchResults; let i = index"
        (click)="selectTrack(track, i)"
        [class.active]="currentTrack?.id === track.id">

        <img
          [src]="getTrackThumbnail(track)"
          [alt]="track.name"
          class="result-thumbnail" />

        <div class="result-info">
          <p class="result-title">{{ track.name }}</p>
          <p class="result-artist">{{ getArtistsNames({ artists: track.artists }) }}</p>
        </div>

        <div class="now-playing-indicator" *ngIf="currentTrack?.id === track.id && isPlaying">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
      </div>
    </div>
  </div> </div> ```

